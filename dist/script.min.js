let pokemonRepository=function(){let e=document.querySelector("#search"),t=[],n=document.querySelector("#modal-container");function i(e){let n=Object.keys(e);"object"==typeof e?"name"===n[0]&&"detailsUrl"===n[1]?t.push(e):console.error("Please enter valid Pokemon object"):console.error("This is not a valid Pokemon object")}function l(e){o();let t=e.detailsUrl;return fetch(t).then(function(e){return s(),e.json()}).then(function(e){return[e.sprites.front_default,e.types,e.id,e.height,e.weight]}).catch(function(e){console.log(e)})}function d(e){l(e).then(function(t){a(t[2],e.name,t[1],t[0],t[3],t[4])})}function c(e){return e[0].toUpperCase()+e.slice(1)}function o(){let e=document.querySelector("body"),t=document.createElement("div");t.classList.add("box"),e.prepend(t);let n=document.createElement("div");n.classList.add("sk-circle"),n.innerHTML='\n    <div class="sk-circle1 sk-child"></div>\n    <div class="sk-circle2 sk-child"></div>\n    <div class="sk-circle3 sk-child"></div>\n    <div class="sk-circle4 sk-child"></div>\n    <div class="sk-circle5 sk-child"></div>\n    <div class="sk-circle6 sk-child"></div>\n    <div class="sk-circle7 sk-child"></div>\n    <div class="sk-circle8 sk-child"></div>\n    <div class="sk-circle9 sk-child"></div>\n    <div class="sk-circle10 sk-child"></div>\n    <div class="sk-circle11 sk-child"></div>\n    <div class="sk-circle12 sk-child"></div>\n    ',t.prepend(n)}function s(){let e=document.querySelector(".box");e.parentElement.removeChild(e)}function a(e,t,n,i,l,d){let o=document.querySelector("#modal-container");o.classList.add("is-visible"),o.innerHTML="";let s=document.createElement("div");s.classList.add("modal"),o.appendChild(s);let a=document.createElement("div");a.setAttribute("id","modal-header-background"),s.appendChild(a);let m=document.createElement("img");m.classList.add("modal-image"),m.setAttribute("src",i),s.appendChild(m);let u=document.createElement("h2");u.classList.add("modal-headline"),u.innerText="#"+e+" "+c(t),s.appendChild(u);let p=document.createElement("div");p.classList.add("modal-close"),s.appendChild(p);let h=document.createElement("button");h.setAttribute("id","button-close"),h.innerText="close",p.appendChild(h);let k=document.createElement("div");k.classList.add("modal-details"),s.appendChild(k);let v=document.createElement("table");k.appendChild(v);let f=document.createElement("tbody");v.appendChild(f);let E=document.createElement("tr");f.appendChild(E);let y=document.createElement("tr");f.appendChild(y);let L=document.createElement("tr");f.appendChild(L);let g=document.createElement("th");g.innerHTML="Types:",E.appendChild(g),n.forEach(function(e){let t=document.createElement("td");t.innerHTML=`${c(e.type.name)}`,E.appendChild(t)});let C=document.createElement("th");C.innerHTML="Height:",y.appendChild(C);let b=document.createElement("td");b.innerHTML=`${l/10} m`,y.appendChild(b);let T=document.createElement("th");T.innerHTML="Weight:",L.appendChild(T);let S=document.createElement("td");S.innerHTML=`${d/10} kg`,L.appendChild(S),h.addEventListener("click",()=>{r()})}function r(){let e=document.querySelector("#modal-container");e.classList.remove("is-visible"),e.parentElement.appendChild(e)}return window.addEventListener("keydown",e=>{"Escape"===e.key&&n.classList.contains("is-visible")&&r()}),n.addEventListener("click",e=>{e.target===n&&r()}),e.addEventListener("input",function(){let t=document.querySelectorAll(".pokemon"),n=e.value.toUpperCase();t.forEach(function(e){e.innerText.toUpperCase().indexOf(n)>-1?e.style.display="":e.style.display="none"})}),e.addEventListener("input",function(){let t=document.querySelector("#easterEgg");if(t&&t.remove(),"Gotta Catch 'Em All!"===e.value){let e=document.querySelector(".pokemon-grid"),t=document.createElement("div");t.style.position="fixed",t.style.top=0,t.style.left=200,t.setAttribute("id","easterEgg"),e.appendChild(t);let n=document.createElement("img");n.setAttribute("src","https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/shiny/87.gif"),t.appendChild(n)}}),{add:i,getAll:function(){return t},isInRepository:function(e){let n=t.filter(function(t){return n.forEach(e=>console.log(`${e.name}`)),t.name===e})},addListItem:function(e){let n=document.querySelector(".pokemon-grid"),i=document.createElement("button");i.classList.add("pokemon-grid__item","pokemon"),n.appendChild(i),i.innerText=`${function(e){return"#"+(t.indexOf(e)+1)}(e)} ${c(e.name)}`,i.addEventListener("click",()=>{d(e)})},loadPokemonList:function(){return o(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=151").then(function(e){return e.json()}).then(function(e){return s(),e.results.forEach(function(e){i({name:e.name,detailsUrl:e.url})})}).catch(function(e){s(),console.log(e)})},loadDetails:l,showModal:a,showDetails:d,showLoadingSpinner:o}}(),displayPokemon=function(){pokemonRepository.loadPokemonList().then(function(){pokemonRepository.getAll().forEach(e=>pokemonRepository.addListItem(e))}).catch(function(e){console.log(e)})};displayPokemon();