let pokemonRepository=function(){let e=document.querySelector("#search"),t=[],n=document.querySelector("#modal-container");function o(e){let n=Object.keys(e);"object"==typeof e?"name"===n[0]&&"detailsUrl"===n[1]?t.push(e):console.error("Please enter valid Pokemon object"):console.error("This is not a valid Pokemon object")}function i(e){d();let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(e){return c(),[e.sprites.front_default,e.types,e.id,e.height,e.weight]}).catch(function(e){c(),console.log(e)})}function l(e){i(e).then(function(t){r(t[2],e.name,t[1],t[0],t[3],t[4])})}function d(){let e=document.querySelector(".pokemon-grid"),t=document.createElement("div");t.setAttribute("class","pokemon-grid__item"),t.innerText="Fetching Pokemon data...",e.appendChild(t)}function c(){let e=document.querySelector("div.pokemon-grid__item");e.parentElement.removeChild(e)}function a(e){return e[0].toUpperCase()+e.slice(1)}function r(e,t,n,o,i,l){let d=document.querySelector("#modal-container");d.classList.add("is-visible"),d.innerHTML="";let c=document.createElement("div");c.classList.add("modal"),d.appendChild(c);let r=document.createElement("div");r.setAttribute("id","modal-header-background"),c.appendChild(r);let m=document.createElement("h2");m.classList.add("modal-headline"),m.innerText="#"+e+" "+a(t),c.appendChild(m);let u=document.createElement("div");u.classList.add("modal-close"),c.appendChild(u);let p=document.createElement("button");p.setAttribute("id","button-close"),p.innerText="close",u.appendChild(p);let h=document.createElement("img");h.classList.add("modal-image"),h.setAttribute("src",o),c.appendChild(h);let f=document.createElement("div");f.classList.add("modal-details"),c.appendChild(f);let E=document.createElement("table");f.appendChild(E);let k=document.createElement("tbody");E.appendChild(k);let y=document.createElement("tr");k.appendChild(y);let C=document.createElement("tr");k.appendChild(C);let L=document.createElement("tr");k.appendChild(L);let g=document.createElement("th");g.innerHTML="Types:",y.appendChild(g),n.forEach(function(e){let t=document.createElement("td");t.innerHTML=`${a(e.type.name)}`,y.appendChild(t)});let v=document.createElement("th");v.innerHTML="Height:",C.appendChild(v);let b=document.createElement("td");b.innerHTML=`${i}0 cm`,C.appendChild(b);let T=document.createElement("th");T.innerHTML="Weight:",L.appendChild(T);let q=document.createElement("td");q.innerHTML=`${l} kg`,L.appendChild(q),p.addEventListener("click",e=>{s()})}function s(){let e=document.querySelector("#modal-container");e.classList.remove("is-visible"),e.parentElement.appendChild(e)}return window.addEventListener("keydown",e=>{"Escape"===e.key&&n.classList.contains("is-visible")&&s()}),n.addEventListener("click",e=>{e.target===n&&s()}),e.addEventListener("input",function(t){let n=document.querySelectorAll(".pokemon"),o=e.value.toUpperCase();n.forEach(function(e){console.log(e.innerText),e.innerText.toUpperCase().indexOf(o)>-1?e.style.display="":e.style.display="none"})}),{add:o,getAll:function(){return t},isInRepository:function(e){let n=t.filter(function(t){return n.forEach(e=>console.log(`${e.name}`)),t.name===e})},addListItem:function(e){let n=document.querySelector(".pokemon-grid"),o=document.createElement("button");o.classList.add("pokemon-grid__item","pokemon"),n.appendChild(o),o.innerText=`${function(e){return"#"+(t.indexOf(e)+1)}(e)} ${a(e.name)}`,o.addEventListener("click",t=>{l(e)})},loadPokemonList:function(){return d(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=151").then(function(e){return e.json()}).then(function(e){return c(),e.results.forEach(function(e){o({name:e.name,detailsUrl:e.url})})}).catch(function(e){c(),console.log(e)})},loadDetails:i,showModal:r,showDetails:l}}(),displayPokemon=function(){pokemonRepository.loadPokemonList().then(function(e){pokemonRepository.getAll().forEach(e=>pokemonRepository.addListItem(e))}).catch(function(e){console.log(e)})};displayPokemon();